import{r as n,c as K,u as h,j as a,a as u,A as $e,d as ke,b as Ee,e as W,f as Ce,g as He,h as _,M as Be,B as Le,F as V,i as Ue,k as Ae,o as Oe,t as De}from"./index-wVUj_43A.js";function Ie(){return n.useState(null)}const Pe=async(e,t)=>{const o=new URL("https://movie-app-backend-h4mu.onrender.com/api/movies/search");o.searchParams.append("searchTerm",e),o.searchParams.append("page",t.toString());const r=await fetch(o);if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);return r.json()},ze=async e=>{const t=new URL(`https://movie-app-backend-h4mu.onrender.com/api/movies/${e}/summary`),o=await fetch(t);if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return o.json()},We=async()=>{const e=new URL("https://movie-app-backend-h4mu.onrender.com/api/movies/favorite"),t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.json()},_e=async e=>{const t=new URL("https://movie-app-backend-h4mu.onrender.com/api/movies/favorite"),o={movieId:e.id},r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`)},Je=async e=>{const t=new URL("https://movie-app-backend-h4mu.onrender.com/api/movies/favorite"),o={movieId:e.id},r=await fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`)};var j;function J(e){if((!j&&j!==0||e)&&K){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),j=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return j}const q=n.forwardRef(({className:e,bsPrefix:t,as:o="div",...r},l)=>(t=h(t,"modal-body"),a.jsx(o,{ref:l,className:u(e,t),...r})));q.displayName="ModalBody";const Ke=q,G=n.forwardRef(({bsPrefix:e,className:t,contentClassName:o,centered:r,size:l,fullscreen:i,children:c,scrollable:d,...f},R)=>{e=h(e,"modal");const v=`${e}-dialog`,T=typeof i=="string"?`${e}-fullscreen-${i}`:`${e}-fullscreen`;return a.jsx("div",{...f,ref:R,className:u(v,t,l&&`${e}-${l}`,r&&`${v}-centered`,d&&`${v}-scrollable`,i&&T),children:a.jsx("div",{className:u(`${e}-content`,o),children:c})})});G.displayName="ModalDialog";const Q=G,X=n.forwardRef(({className:e,bsPrefix:t,as:o="div",...r},l)=>(t=h(t,"modal-footer"),a.jsx(o,{ref:l,className:u(e,t),...r})));X.displayName="ModalFooter";const Ve=X,Y=n.forwardRef(({bsPrefix:e,className:t,closeLabel:o="Close",closeButton:r=!1,...l},i)=>(e=h(e,"modal-header"),a.jsx($e,{ref:i,...l,className:u(t,e),closeLabel:o,closeButton:r})));Y.displayName="ModalHeader";const qe=Y,Ge=ke("h4"),Z=n.forwardRef(({className:e,bsPrefix:t,as:o=Ge,...r},l)=>(t=h(t,"modal-title"),a.jsx(o,{ref:l,className:u(e,t),...r})));Z.displayName="ModalTitle";const Qe=Z;function Xe(e){return a.jsx(V,{...e,timeout:null})}function Ye(e){return a.jsx(V,{...e,timeout:null})}const P=n.forwardRef(({bsPrefix:e,className:t,style:o,dialogClassName:r,contentClassName:l,children:i,dialogAs:c=Q,"data-bs-theme":d,"aria-labelledby":f,"aria-describedby":R,"aria-label":v,show:T=!1,animation:p=!0,backdrop:w=!0,keyboard:ee=!0,onEscapeKeyDown:b,onShow:te,onHide:M,container:ae,autoFocus:oe=!0,enforceFocus:se=!0,restoreFocus:re=!0,restoreFocusOptions:ne,onEntered:ie,onExit:$,onExiting:le,onEnter:k,onEntering:E,onExited:C,backdropClassName:H,manager:B,...ce},de)=>{const[ue,me]=n.useState({}),[he,L]=n.useState(!1),x=n.useRef(!1),F=n.useRef(!1),g=n.useRef(null),[y,fe]=Ie(),ve=Ee(de,fe),U=W(M),pe=Ce();e=h(e,"modal");const ge=n.useMemo(()=>({onHide:U}),[U]);function A(){return B||Ue({isRTL:pe})}function O(s){if(!K)return;const m=A().getScrollbarWidth()>0,z=s.scrollHeight>Oe(s).documentElement.clientHeight;me({paddingRight:m&&!z?J():void 0,paddingLeft:!m&&z?J():void 0})}const N=W(()=>{y&&O(y.dialog)});He(()=>{_(window,"resize",N),g.current==null||g.current()});const ye=()=>{x.current=!0},we=s=>{x.current&&y&&s.target===y.dialog&&(F.current=!0),x.current=!1},D=()=>{L(!0),g.current=De(y.dialog,()=>{L(!1)})},Me=s=>{s.target===s.currentTarget&&D()},je=s=>{if(w==="static"){Me(s);return}if(F.current||s.target!==s.currentTarget){F.current=!1;return}M==null||M()},Se=s=>{ee?b==null||b(s):(s.preventDefault(),w==="static"&&D())},Re=(s,m)=>{s&&O(s),k==null||k(s,m)},Te=s=>{g.current==null||g.current(),$==null||$(s)},xe=(s,m)=>{E==null||E(s,m),Ae(window,"resize",N)},Fe=s=>{s&&(s.style.display=""),C==null||C(s),_(window,"resize",N)},Ne=n.useCallback(s=>a.jsx("div",{...s,className:u(`${e}-backdrop`,H,!p&&"show")}),[p,H,e]),I={...o,...ue};I.display="block";const be=s=>a.jsx("div",{role:"dialog",...s,style:I,className:u(t,e,he&&`${e}-static`,!p&&"show"),onClick:w?je:void 0,onMouseUp:we,"data-bs-theme":d,"aria-label":v,"aria-labelledby":f,"aria-describedby":R,children:a.jsx(c,{...ce,onMouseDown:ye,className:r,contentClassName:l,children:i})});return a.jsx(Be.Provider,{value:ge,children:a.jsx(Le,{show:T,ref:ve,backdrop:w,container:ae,keyboard:!0,autoFocus:oe,enforceFocus:se,restoreFocus:re,restoreFocusOptions:ne,onEscapeKeyDown:Se,onShow:te,onHide:M,onEnter:Re,onEntering:xe,onEntered:ie,onExit:Te,onExiting:le,onExited:Fe,manager:A(),transition:p?Xe:void 0,backdropTransition:p?Ye:void 0,renderBackdrop:Ne,renderDialog:be})})});P.displayName="Modal";const S=Object.assign(P,{Body:Ke,Header:qe,Title:Qe,Footer:Ve,Dialog:Q,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),et=({movieId:e,onClose:t})=>{const[o,r]=n.useState();return n.useEffect(()=>{(async()=>{try{const i=await ze(e);r(i)}catch(i){console.log(i)}})()},[e]),o?a.jsx(a.Fragment,{children:a.jsxs(S,{show:!0,onHide:t,closeButton:!0,scrollable:!0,"aria-labelledby":"contained-modal-title-vcenter","data-bs-theme":"dark",centered:!0,children:[a.jsx(S.Header,{closeButton:!0,children:a.jsx(S.Title,{id:"contained-modal-title-vcenter",children:o.title})}),a.jsxs(S.Body,{children:[a.jsx("h6",{children:o.release_date}),a.jsx("p",{children:o.overview})]})]})}):a.jsx(a.Fragment,{})},tt=()=>{const[e,t]=n.useState([]),o=async()=>{try{const c=await We();t(c.results)}catch(c){console.log(c)}};return n.useEffect(()=>{o()},[e]),{favorites:e,setFavorites:t,fetchFavoriteMovies:o,favoriteStatus:c=>e.some(d=>c.id===d.id),addFavoriteMovie:async c=>{try{await _e(c);const d=[...e,c];t(d)}catch(d){console.log(d)}},removeFavoriteMovie:async c=>{try{await Je(c);const d=e.filter(f=>f.id!==c.id);t(d)}catch(d){console.log(d)}}}};function at(){return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"me-2",children:"Remove from Favorites"}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash-fill",viewBox:"0 0 16 16",children:a.jsx("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"})})]})}function ot({movie:e,handleSelected:t,FavoriteComponent:o,handleFavoritesClick:r}){const l=i=>i.poster_path?`https://image.tmdb.org/t/p/w342${i.poster_path}`:"/black-bg-poster.png";return a.jsxs("div",{className:"image-container d-flex justify-content-start m-3",onClick:()=>t(e),children:[a.jsx("img",{style:{width:"15em"},src:l(e),alt:`poster of ${e.title}`}),a.jsx("img",{}),a.jsx("div",{onClick:i=>{i.stopPropagation(),r(e)},className:`favorite-component d-flex 
                   justify-content-center align-items-center`,children:a.jsx(o,{})})]})}function st({heading:e}){return a.jsx(a.Fragment,{children:a.jsx("div",{className:"col",children:a.jsx("h1",{children:e})})})}export{ot as M,at as R,et as a,st as b,Pe as s,tt as u};
