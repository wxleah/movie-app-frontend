import{j as e,r as l}from"./index-lsHCm9Cc.js";import{u as m,M as x,R as j,a as g,b as f,s as v}from"./MovieListHeading-v3vBQ0Ti.js";function M(){return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"me-2",children:"Add to Favorites"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"red",className:"bi bi-heart-fill",viewBox:"0 0 16 16",children:e.jsx("path",{fillRule:"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"})})]})}function S({movies:n,favorite:r}){const[a,i]=l.useState(void 0),o=t=>{i(t)},{favoriteStatus:c,addFavoriteMovie:d,removeFavoriteMovie:h}=m();return e.jsxs(e.Fragment,{children:[n.map((t,s)=>{const u=r?!0:c(t);return e.jsx(x,{movie:t,FavoriteComponent:u?j:M,handleFavoritesClick:u?h:d,favoriteStatus:c,handleSelected:o},s)}),a?e.jsx(g,{movieId:a.id.toString(),onClose:()=>i(void 0)}):null]})}function p({handleSubmit:n,handleChange:r,value:a}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"col col-sm-4",children:e.jsx("form",{onSubmit:n,className:"d-flex",children:e.jsx("input",{className:"form-control",type:"text",placeholder:"Type to search...",value:a,onChange:r})})})})}function w({onClick:n}){return e.jsx("div",{className:`col-md-3 d-flex 
                           align-items-center 
                           justify-content-center`,children:e.jsx("button",{className:"btn btn-m btn-outline-light view-more-btn",onClick:n,children:"View More"})})}function b(){return e.jsxs("div",{className:"text-secondary mb-0",children:[e.jsx("strong",{children:"Note:"})," Searching new movies and add to favorites..."]})}function C(){const[n,r]=l.useState([]),[a,i]=l.useState(""),o=l.useRef(1),c=async t=>{t.preventDefault();try{const s=await v(a,1);s.results&&(r(s.results),o.current=1)}catch(s){console.log(s)}},d=t=>{i(t.target.value)},h=async()=>{const t=o.current+1;try{const s=await v(a,t);r([...n,...s.results]),o.current=t}catch(s){console.log(s)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row d-flex align-items-center mt-4 mb-4",children:[e.jsx(f,{heading:"Movies"}),e.jsx(p,{value:a,handleSubmit:c,handleChange:d})]}),e.jsxs("div",{className:"row",children:[e.jsx(S,{movies:n,favorite:null}),n.length!==0?e.jsx(w,{onClick:h}):e.jsx(b,{})]})]})}export{C as default};
